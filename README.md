# docker-manager
Docker Monitor v2.1 - Centralized Documentation
Generated by GitHub Copilot

Overview
- Terminal UI for monitoring Docker containers with focus-aware navigation.
- Main views are Containers and Logs.
- Logs follow the currently selected container.

Quick Install (Linux)
- Ensure Docker daemon is running and at least one container is active.
- Install: bash installer.sh /path/to/docker_monitor.tar.xz
- Clean install: bash installer.sh --clean-install /path/to/docker_monitor.tar.xz
- Purge uninstall: bash installer.sh --purge
- Help: bash installer.sh --help
- Shortcut launch after install: dstat
- setup_docker_monitor.sh has been removed; installer.sh now performs pre-install and post-install validation.

Requirements
- Docker installed and daemon running.
- User has permission to run Docker commands.
- Python 3.10+ recommended.

Linux Packaging and Install
- Release archive: docker_monitor.tar.xz (v2.1, contains project files at archive root, including installer.sh).
- Installer script: installer.sh
- Install target: /opt/docker_monitor/
- Launcher: /usr/bin/dstat
- Installer validates sudo access before privileged operations.
- Installer checks and can auto-install missing requirements on supported Linux package managers.
- Installer aborts install if Docker daemon is unavailable or no running containers are found.

Installer Usage (Linux)
- ./installer.sh
	- Installs from default archive path: ./docker_monitor.tar.xz in the current execution directory.
	- If an existing install is detected, prompts to Abort or switch to Clean Install.
- ./installer.sh /path/to/docker_monitor.tar.xz
	- Installs from explicit archive path.
- ./installer.sh --clean-install [/path/to/docker_monitor.tar.xz]
	- Purges old install, then installs fresh.
- ./installer.sh --purge
	- Removes /opt/docker_monitor/ and /usr/bin/dstat.
- ./installer.sh --help
	- Prints installer usage.

Run
- python docker_main.py

Main Controls
- Q / ESC: Quit
- TAB / Shift+TAB: Move section focus
- Up/Down: Move selection or scroll focused section
- PgUp/PgDn: Page scroll focused section
- Home/End: Jump to start/end in focused section
- ENTER on container: Open action menu
- T: Theme selector
- 1: Toggle Containers section
- 2: Toggle Logs section

Container Action Menu
- Cursor-driven menu (Up/Down + ENTER).
- Actions: Start, Stop, Restart, Update, Delete, Cancel.
- Each action asks for Yes/No confirmation.

Containers Table
- Adaptive, content-aware column sizing.
- Core columns are prioritized; optional columns are hidden when space is tight.
- Column order (left to right): NAME, CPU, MEM, RX, TX, IP, PORTS, NET, ID, STATUS.
- Optional hide order under narrow width: STATUS -> ID -> IP -> TX -> RX -> NET -> PORTS.
- Right-side separators are theme-aware for readability.

Ports Formatting
- Exposed ports are normalized to compact host/container mappings.
- Bind addresses like 0.0.0.0 and [::] are removed.
- If host and container ports are equal, display single port (example: 80 instead of 80:80).
- If different, display mapping (example: 443:225).
- Port mappings are comma-separated without spaces (example: 9090:9090,8080:8080).

Network Fields
- NET and IP are collected from docker inspect.
- RX and TX are split from per-container network I/O from docker stats.
- Selected row detail line shows NET, IP, full PORTS string, RX, and TX.

Status Formatting
- Duplicate health markers are normalized (example: "(healthy) (healthy)" becomes "(healthy)").
- Status text may still be truncated when terminal width is constrained.

Logs Behavior
- Logs panel follows selected container automatically.
- Logs are fetched by container ID.
- Both stdout and stderr are collected for reliable visibility.

Inspect
- Inspect was removed from the action menu by request.
- Network/ports/IP details are available in table columns and selected-row details.

Theme
- Theme selector is available with T.
- Theme selection flow:
	- ENTER previews selected theme and opens confirmation prompt.
	- Y or ENTER saves selected theme as default and exits theme menu.
	- N keeps selected theme for current session only and exits theme menu.
	- ESC cancels and reverts to the previous theme.
- Included themes:
	- Default
	- Dracula
	- Nord
	- Gruvbox
	- OneDark
	- Monokai
	- Solarized
	- Solarized Light
	- Catppuccin Mocha
	- Dark Mode
	- TTY
	- Matrix
- Theme hints are shown in footer.

Troubleshooting
- If Docker commands fail, verify daemon and permissions.
- If UI appears stale, resize terminal once or restart.
- If logs appear empty, verify selected container is generating output.

Runtime Stability Notes
- Subprocess timeout handling now force-terminates timed-out Docker subprocesses to prevent orphaned processes.
- Event-stream and log-stream subprocesses are explicitly cleaned up on shutdown.
- Async shutdown flow was hardened to avoid coroutine warnings during exit.

Exit Message
- App exit now prints: "Thank you for using Docker Monitor â€” Davidian-SK".
